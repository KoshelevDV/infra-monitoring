---
# Развернуть Apache Kafka single node (KRaft, без ZooKeeper)
#
# Использование:
#   # Без аутентификации (PLAINTEXT):
#   ansible-playbook playbooks/kafka-single.yml -i inventories/production/hosts.yml \
#     -l kafka_single
#
#   # SASL/SCRAM (логин+пароль):
#   ansible-playbook playbooks/kafka-single.yml -i inventories/production/hosts.yml \
#     -l kafka_single \
#     -e "kafka_security_protocol=SASL_PLAINTEXT" \
#     -e "kafka_sasl_mechanism=SCRAM-SHA-512" \
#     -e "kafka_broker_password=BrokerPass123" \
#     --ask-vault-pass
#
#   # SASL/SCRAM + TLS:
#   ansible-playbook playbooks/kafka-single.yml -i inventories/production/hosts.yml \
#     -l kafka_single \
#     -e "kafka_security_protocol=SASL_SSL" \
#     -e "kafka_ssl_keystore_src=files/kafka.keystore.jks" \
#     -e "kafka_ssl_truststore_src=files/kafka.truststore.jks" \
#     --ask-vault-pass

- name: Deploy Apache Kafka (single node, KRaft)
  hosts: kafka_single
  become: true
  gather_facts: true

  roles:
    - role: kafka
