#!/bin/bash
# Kafka environment â€” managed by Ansible

export KAFKA_HEAP_OPTS="-Xms{{ kafka_heap_size }} -Xmx{{ kafka_heap_size }}"

export KAFKA_JVM_PERFORMANCE_OPTS="{{ kafka_jvm_opts }}"

{% if kafka_jmx_enabled %}
export JMX_PORT="{{ kafka_jmx_port }}"
export KAFKA_JMX_OPTS="-Dcom.sun.management.jmxremote \
  -Dcom.sun.management.jmxremote.authenticate=false \
  -Dcom.sun.management.jmxremote.ssl=false \
  -Dcom.sun.management.jmxremote.port={{ kafka_jmx_port }}"
{% endif %}

{% if kafka_security_protocol != 'PLAINTEXT' %}
export KAFKA_OPTS="-Djava.security.auth.login.config={{ kafka_config_dir }}/kafka_jaas.conf"
{% endif %}

export LOG_DIR="{{ kafka_log_dir }}"
